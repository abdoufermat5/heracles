# Configuration

All configuration is managed through environment variables in the `.env` file at the project root.

---

## Core Settings

| Variable | Description | Default |
|---|---|---|
| `LDAP_ORGANISATION` | Organization name stored in LDAP | `MyOrganisation` |
| `LDAP_DOMAIN` | DNS domain for the directory | `heracles.local` |
| `LDAP_BASE_DN` | LDAP base distinguished name | `dc=heracles,dc=local` |
| `LDAP_ADMIN_PASSWORD` | LDAP admin bind password | *(generated)* |
| `SECRET_KEY` | JWT signing key | *(generated)* |
| `POSTGRES_PASSWORD` | PostgreSQL password | *(generated)* |
| `REDIS_PASSWORD` | Redis password | *(generated)* |
| `HRC_ADMIN_USER` | Heracles admin username | `hrc-admin` |
| `HRC_ADMIN_PASSWORD` | Heracles admin password | *(generated)* |

!!! warning "Security"
    Never commit `.env` to version control. All secrets are auto-generated by `make setup`.

---

## Service URLs

| Variable | Description | Default |
|---|---|---|
| `LDAP_URI` | LDAP server URI | `ldap://ldap:389` |
| `POSTGRES_HOST` | PostgreSQL hostname | `postgres` |
| `POSTGRES_PORT` | PostgreSQL port | `5432` |
| `REDIS_URL` | Redis connection URL | `redis://redis:6379/0` |

---

## JWT Configuration

| Variable | Description | Default |
|---|---|---|
| `ACCESS_TOKEN_EXPIRE_MINUTES` | Access token lifetime | `30` |
| `REFRESH_TOKEN_EXPIRE_DAYS` | Refresh token lifetime | `7` |
| `JWT_ALGORITHM` | Signing algorithm | `HS256` |

---

## Password Hashing

Heracles supports multiple password hashing methods for LDAP passwords:

| Method | Description |
|---|---|
| `ARGON2` | Modern, recommended (default) |
| `BCRYPT` | Strong, widely supported |
| `SSHA` | Salted SHA-1 (legacy compatibility) |
| `SHA` | SHA-1 (legacy) |
| `MD5` / `SMD5` | Legacy only â€” not recommended |

Set the default method:

```bash
PASSWORD_HASH_METHOD=ARGON2
```

---

## LDAP OU Configuration

Customize the organizational unit names used in the LDAP tree:

| Variable | Description | Default |
|---|---|---|
| `HRC_USER_RDN` | Users container | `ou=people` |
| `HRC_GROUP_RDN` | Groups container | `ou=groups` |
| `HRC_SUDO_RDN` | Sudo rules container | `ou=sudoers` |
| `HRC_SYSTEM_RDN` | Systems container | `ou=systems` |
| `HRC_DNS_RDN` | DNS zones container | `ou=dns` |
| `HRC_DHCP_RDN` | DHCP config container | `ou=dhcp` |

---

## Production Checklist

Before deploying to production:

- [x] Change all default passwords in `.env`
- [x] Set `SECRET_KEY` to a strong random value
- [x] Enable TLS for the LDAP connection (`ldaps://`)
- [x] Use `docker-compose.prod.yml` (no phpLDAPadmin, no debug)
- [x] Set up regular backups (see [Backup & Restore](../administration/backup.md))
- [x] Configure a reverse proxy with valid TLS certificates
- [x] Review ACL policies

See `.env.production.example` for a complete reference.
